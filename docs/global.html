<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Global - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>

<body>

    <input type="checkbox" id="nav-trigger" class="nav-trigger" />
    <label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

    <label for="nav-trigger" class="overlay"></label>

    <nav>
        <h2><a href="index.html">Home</a></h2>
        <h3>Classes</h3>
        <ul>
            <li><a href="ManifestEntry.html">ManifestEntry</a>
                <ul class='methods'>
                    <li data-type='method'><a href="ManifestEntry.html#hashFieldPath">hashFieldPath</a></li>
                </ul>
            </li>
        </ul>
        <h3>Global</h3>
        <ul>
            <li><a href="global.html#download">download</a></li>
            <li><a href="global.html#downloadDatabases">downloadDatabases</a></li>
            <li><a href="global.html#extract">extract</a></li>
            <li><a href="global.html#extractDb">extractDb</a></li>
            <li><a href="global.html#fetch">fetch</a></li>
            <li><a href="global.html#getManifest">getManifest</a></li>
            <li><a href="global.html#processDb">processDb</a></li>
            <li><a href="global.html#processTable">processTable</a></li>
            <li><a href="global.html#rename">rename</a></li>
        </ul>
    </nav>

    <div id="main">

        <h1 class="page-title">Global</h1>

        <section>

            <header>

                <h2>

                </h2>

            </header>

            <article>
                <div class="container-overview">

                    <dl class="details">

                    </dl>

                </div>

                <h3 class="subsection-title">Methods</h3>

                <h4 class="name" id="download"><span class="type-signature"></span>download<span class="signature">(manifest, options)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="lib_download.js.html">lib/download.js</a>, <a href="lib_download.js.html#line94">line 94</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <div class="description">
                    Downloads the sqlite databases that contain the content of the destiny manifest.
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>manifest</code></td>

                            <td class="type">

                                <span class="param-type">object</span>

                            </td>

                            <td class="description last">the manifest location data from the destiny api.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>options</code></td>

                            <td class="type">

                                <span class="param-type"><a href="global.html#ExtractOptions">ExtractOptions</a></span>

                            </td>

                            <td class="description last">options for the extraction.</td>
                        </tr>

                    </tbody>
                </table>

                <h5>Returns:</h5>

                <div class="param-desc">
                    - the location of each downloaded database as a DatabaseResult[].
                </div>

                <dl class="param-type">
                    <dt>
        Type
    </dt>
                    <dd>

                        <span class="param-type">Promise</span>

                    </dd>
                </dl>

                <h4 class="name" id="downloadDatabases"><span class="type-signature"></span>downloadDatabases<span class="signature">(urls, options)</span><span class="type-signature"></span></h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="lib_download.js.html">lib/download.js</a>, <a href="lib_download.js.html#line74">line 74</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <div class="description">
                    Download one or more manifest databases.
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>urls</code></td>

                            <td class="type">

                                <span class="param-type">object</span>

                            </td>

                            <td class="description last">an object containing relative urls to manifest databases keyed by language.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>options</code></td>

                            <td class="type">

                                <span class="param-type">DownloadOptions</span>

                            </td>

                            <td class="description last">options for the download.</td>
                        </tr>

                    </tbody>
                </table>

                <h4 class="name" id="extract"><span class="type-signature"></span>extract<span class="signature">(options, manifest<span class="signature-attributes">opt</span>)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="index.js.html">index.js</a>, <a href="index.js.html#line52">line 52</a>
                            </li>
                        </ul>
                    </dd>

                    <dt class="tag-see">See:</dt>
                    <dd class="tag-see">
                        <ul>
                            <li><a href="https://www.bungie.net/Platform/Destiny/Manifest/">The manifest description</a></li>

                            <li><a href="https://www.bungie.net/platform/destiny/help/HelpDetail/GET?uri=Manifest%252f">Bungie API Docs for GetDestinyManifest</a></li>

                            <li><a href="http://bungienetplatform.wikia.com/wiki/GetDestinyManifest">Community Docs for GetDestinyManifest</a></li>
                        </ul>
                    </dd>

                </dl>

                <div class="description">
                    Extract and process the destiny manifest.
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th>Attributes</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>options</code></td>

                            <td class="type">

                                <span class="param-type"><a href="global.html#ExtractOptions">ExtractOptions</a></span>

                            </td>

                            <td class="attributes">

                            </td>

                            <td class="description last">options for the extract process.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>manifest</code></td>

                            <td class="type">

                                <span class="param-type">object</span>

                            </td>

                            <td class="attributes">

                                &lt;optional><br>

                            </td>

                            <td class="description last">an already downloaded manifest description from https://www.bungie.net/Platform/Destiny/Manifest/ if not provided the manifest will be downloaded.</td>
                        </tr>

                    </tbody>
                </table>

                <h5>Returns:</h5>

                <div class="param-desc">
                    - a promise for the extraction process.
                </div>

                <dl class="param-type">
                    <dt>
        Type
    </dt>
                    <dd>

                        <span class="param-type">Promise</span>

                    </dd>
                </dl>

                <h4 class="name" id="extractDb"><span class="type-signature"></span>extractDb<span class="signature">(info)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="lib_download.js.html">lib/download.js</a>, <a href="lib_download.js.html#line31">line 31</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <div class="description">
                    Extracts a manifest database from a downloed zip file.
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>info</code></td>

                            <td class="type">

                                <span class="param-type"><a href="global.html#DownloadInfo">DownloadInfo</a></span>

                            </td>

                            <td class="description last">data about the downloaded file.</td>
                        </tr>

                    </tbody>
                </table>

                <h5>Returns:</h5>

                <div class="param-desc">
                    - a promise for a <a href="global.html#DatabaseResult">DatabaseResult</a> pointing to the extracted database.
                </div>

                <dl class="param-type">
                    <dt>
        Type
    </dt>
                    <dd>

                        <span class="param-type">Promise</span>

                    </dd>
                </dl>

                <h4 class="name" id="fetch"><span class="type-signature"></span>fetch<span class="signature">(url, lang, dir)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="lib_download.js.html">lib/download.js</a>, <a href="lib_download.js.html#line54">line 54</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <div class="description">
                    Download a single zipped database.
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>url</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the relative path to the file.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>lang</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the language code of the database content.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>dir</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the directory to store the database in.</td>
                        </tr>

                    </tbody>
                </table>

                <h5>Returns:</h5>

                <div class="param-desc">
                    - a promise for a <a href="global.html#DownloadInfo">DownloadInfo</a>.
                </div>

                <dl class="param-type">
                    <dt>
        Type
    </dt>
                    <dd>

                        <span class="param-type">Promise</span>

                    </dd>
                </dl>

                <h4 class="name" id="getManifest"><span class="type-signature"></span>getManifest<span class="signature">()</span><span class="type-signature"></span></h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="index.js.html">index.js</a>, <a href="index.js.html#line15">line 15</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <div class="description">
                    Download the manifest description from the Destiny API or return it from provided options.
                </div>

                <h4 class="name" id="processDb"><span class="type-signature"></span>processDb<span class="signature">(dbinfo, processor)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="lib_process-db.js.html">lib/process-db.js</a>, <a href="lib_process-db.js.html#line113">line 113</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <div class="description">
                    Process the manifest database passing each retrieved item to a processor function.
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>dbinfo</code></td>

                            <td class="type">

                                <span class="param-type"><a href="global.html#DatabaseResult">DatabaseResult</a></span>

                            </td>

                            <td class="description last">the location and language for the database being processed.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>processor</code></td>

                            <td class="type">

                                <span class="param-type"><a href="global.html#processor">processor</a></span>

                            </td>

                            <td class="description last">a callback to handle each item in the manifest.</td>
                        </tr>

                    </tbody>
                </table>

                <h5>Returns:</h5>

                <div class="param-desc">
                    - A promise that completes when the entire database has been processed.
                </div>

                <dl class="param-type">
                    <dt>
        Type
    </dt>
                    <dd>

                        <span class="param-type">Promise</span>

                    </dd>
                </dl>

                <h4 class="name" id="processTable"><span class="type-signature"></span>processTable<span class="signature">(lang, db, tablename, processor)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="lib_process-db.js.html">lib/process-db.js</a>, <a href="lib_process-db.js.html#line91">line 91</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <div class="description">
                    Processes a single table in the database passing the row data and the table name onto the processor function.
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>lang</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the language code of the database content.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>db</code></td>

                            <td class="type">

                                <span class="param-type">sqlite3.Database</span>

                            </td>

                            <td class="description last">the database being read.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>tablename</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the name of the table to process.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>processor</code></td>

                            <td class="type">

                                <span class="param-type"><a href="global.html#processor">processor</a></span>

                            </td>

                            <td class="description last">the processor function.</td>
                        </tr>

                    </tbody>
                </table>

                <h5>Returns:</h5>

                <div class="param-desc">
                    - A promise that completed when the table had been read.
                </div>

                <dl class="param-type">
                    <dt>
        Type
    </dt>
                    <dd>

                        <span class="param-type">Promise</span>

                    </dd>
                </dl>

                <h4 class="name" id="rename"><span class="type-signature"></span>rename<span class="signature">(file, name)</span><span class="type-signature"> &rarr; {Promise}</span></h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="lib_download.js.html">lib/download.js</a>, <a href="lib_download.js.html#line16">line 16</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <div class="description">
                    Rename a file.
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>file</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">path to the file to rename.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>name</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the name to move the file to.</td>
                        </tr>

                    </tbody>
                </table>

                <h5>Returns:</h5>

                <dl class="param-type">
                    <dt>
        Type
    </dt>
                    <dd>

                        <span class="param-type">Promise</span>

                    </dd>
                </dl>

                <h3 class="subsection-title">Type Definitions</h3>

                <h4 class="name" id="DatabaseResult">DatabaseResult</h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="lib_download.js.html">lib/download.js</a>, <a href="lib_download.js.html#line110">line 110</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <h5 class="subsection-title">Properties:</h5>

                <table class="props">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>lang</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the language this database content is for.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>dbfile</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the path to the sqlite database file.</td>
                        </tr>

                    </tbody>
                </table>

                <h5>Type:</h5>
                <ul>
                    <li>

                        <span class="param-type">object</span>

                    </li>
                </ul>

                <h4 class="name" id="DownloadInfo">DownloadInfo</h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="lib_download.js.html">lib/download.js</a>, <a href="lib_download.js.html#line102">line 102</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <h5 class="subsection-title">Properties:</h5>

                <table class="props">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>lang</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the language code of the database content.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>zipfile</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the path to the downloaded zip file containing the database.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>archiveEntry</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the name of the entry in the zipfile containing the database.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>dir</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the directory containing the zipfile.</td>
                        </tr>

                    </tbody>
                </table>

                <h5>Type:</h5>
                <ul>
                    <li>

                        <span class="param-type">object</span>

                    </li>
                </ul>

                <h4 class="name" id="ExtractOptions">ExtractOptions</h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="index.js.html">index.js</a>, <a href="index.js.html#line64">line 64</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <h5 class="subsection-title">Properties:</h5>

                <table class="props">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th>Attributes</th>

                            <th>Default</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>processor</code></td>

                            <td class="type">

                                <span class="param-type"><a href="global.html#processor">processor</a></span>

                            </td>

                            <td class="attributes">

                            </td>

                            <td class="default">

                            </td>

                            <td class="description last">the processor to run against manifest content.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>options.langs</code></td>

                            <td class="type">

                                <span class="param-type">Array.&lt;string></span>

                            </td>

                            <td class="attributes">

                                &lt;optional><br>

                            </td>

                            <td class="default">

                                <code>['en', 'fr', 'es', 'de', 'it', 'ja', 'pt-br']</code>

                            </td>

                            <td class="description last">a list of languages to download content from the manifest for.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>options.path</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="attributes">

                                &lt;optional><br>

                            </td>

                            <td class="default">

                                <code>'./manifest-content'</code>

                            </td>

                            <td class="description last">where to download the databases to.</td>
                        </tr>

                    </tbody>
                </table>

                <h5>Type:</h5>
                <ul>
                    <li>

                        <span class="param-type">object</span>

                    </li>
                </ul>

                <h4 class="name" id="processor"><span class="type-signature"></span>processor<span class="signature">(lang, entry)</span><span class="type-signature"></span></h4>

                <dl class="details">

                    <dt class="tag-source">Source:</dt>
                    <dd class="tag-source">
                        <ul class="dummy">
                            <li>
                                <a href="index.js.html">index.js</a>, <a href="index.js.html#line71">line 71</a>
                            </li>
                        </ul>
                    </dd>

                </dl>

                <div class="description">
                    Handler for manifest data read from the sqlite database.
                </div>

                <h5>Parameters:</h5>

                <table class="params">
                    <thead>
                        <tr>

                            <th>Name</th>

                            <th>Type</th>

                            <th class="last">Description</th>
                        </tr>
                    </thead>

                    <tbody>

                        <tr>

                            <td class="name"><code>lang</code></td>

                            <td class="type">

                                <span class="param-type">string</span>

                            </td>

                            <td class="description last">the language code of the content in the entry.</td>
                        </tr>

                        <tr>

                            <td class="name"><code>entry</code></td>

                            <td class="type">

                                <span class="param-type"><a href="ManifestEntry.html">ManifestEntry</a></span>

                            </td>

                            <td class="description last">a single entry from the manifest database.</td>
                        </tr>

                    </tbody>
                </table>

            </article>

        </section>

    </div>

    <br class="clear">

    <footer>
        Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Tue Feb 14 2017 11:38:43 GMT+0900 (JST) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
    </footer>

    <script>
        prettyPrint();
    </script>
    <script src="scripts/linenumber.js"></script>
</body>

</html>